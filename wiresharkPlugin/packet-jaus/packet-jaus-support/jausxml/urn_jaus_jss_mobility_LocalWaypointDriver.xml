<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<service_def name="LocalWaypointDriver" id="urn:jaus:jss:mobility:LocalWaypointDriver" version="1.1" xmlns="urn:jaus:jsidl:1.1" xmlns:ns2="urn:jaus:jsidl:plus">
    <description xml:space="preserve">The function of the Local Waypoint Driver is to move the platform given a single target waypoint and desired travel speed.  A single waypoint is provided via the Set Local Waypoint message.  The waypoint remains unchanged until a new Set Local Waypoint message is received.  A waypoint consists of the desired position and orientation of the platform.  Another commanded input consists of the desired travel speed.  The desired travel speed remains unchanged unless a new Set Travel Speed Message is received.  The travel speed may then be changed at any time during waypoint navigation.  The travel speed is reset to zero for all transitions from the Ready State.</description>
    <assumptions xml:space="preserve">Messages may be delayed, lost or reordered.</assumptions>
    <references>
        <inherits_from name="management" id="urn:jaus:jss:core:Management" version="1.1"/>
    </references>
    <message_set>
        <input_set>
            <message_def name="SetTravelSpeed" message_id="040A" is_command="true" deprecated="true">
                <description xml:space="preserve">This message is used to set the desired travel speed.</description>
                <header name="AppHeader">
                    <record name="HeaderRec" optional="false">
                        <fixed_field name="MessageID" optional="false" interpretation="A two byte field to hold the message ID of a message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </header>
                <body name="Body">
                    <record name="TravelSpeedRec" optional="false">
                        <fixed_field name="Speed" optional="false" field_type="unsigned short integer" field_units="meter per second">
                            <scale_range real_lower_limit="0" real_upper_limit="327.67" integer_function="round"/>
                        </fixed_field>
                    </record>
                </body>
                <footer name="Footer"/>
            </message_def>
            <message_def name="SetTravelSpeedExt" message_id="04AA" is_command="true">
                <description xml:space="preserve">This message is used to set the desired travel speed. It uses a variable field allowing platforms to select various methods for specifying speed.</description>
                <header name="AppHeader">
                    <record name="HeaderRec" optional="false">
                        <fixed_field name="MessageID" optional="false" interpretation="A two byte field to hold the message ID of a message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </header>
                <body name="Body">
                    <record name="TravelSpeedExtRec" optional="false">
                        <variable_field name="Speed" optional="false">
                            <type_and_units_field>
                                <type_and_units_enum name="SpeedOverGround" index="0" field_type="unsigned short integer" field_units="meter per second">
                                    <scale_range real_lower_limit="-327.68" real_upper_limit="327.67" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="SpeedRelativeToMedium" index="1" field_type="unsigned short integer" field_units="meter per second">
                                    <scale_range real_lower_limit="-327.68" real_upper_limit="327.67" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="RotationsPerMinute" index="2" field_type="unsigned short integer" field_units="rotations per minute">
                                    <scale_range real_lower_limit="-1000" real_upper_limit="1000" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="IndicatedSpeed" index="3" field_type="unsigned short integer" field_units="meter per second">
                                    <scale_range real_lower_limit="-327.68" real_upper_limit="327.67" integer_function="round"/>
                                </type_and_units_enum>
                            </type_and_units_field>
                        </variable_field>
                    </record>
                </body>
                <footer name="Footer"/>
            </message_def>
            <message_def name="SetLocalWaypoint" message_id="040D" is_command="true" deprecated="true">
                <description xml:space="preserve">This message is used to set waypoint data based on the local coordinate system.  A local waypoint can have up to six fields to describe it completely.  The waypoint is defined in a local coordinate system using the X, Y, and Z fields.  The desired orientation of the platform at the waypoint is defined using the roll, pitch, and yaw fields. The remaining fields provide the desired waypoint and path tolerances. Only fields 1-3 (presence vector, X, and Y) are required for each waypoint.  The presence vector is used to specify if the remaining fields, i.e., Z, roll, pitch, and yaw, are used to further describe each waypoint and the desired orientation at that point and whether tolerances are provided.</description>
                <header name="AppHeader">
                    <record name="HeaderRec" optional="false">
                        <fixed_field name="MessageID" optional="false" interpretation="A two byte field to hold the message ID of a message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </header>
                <body name="Body">
                    <record name="LocalWaypointRec" optional="false">
                        <presence_vector field_type_unsigned="unsigned byte"/>
                        <fixed_field name="X" optional="false" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="-100000" real_upper_limit="100000" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Y" optional="false" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="-100000" real_upper_limit="100000" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Z" optional="true" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="-100000" real_upper_limit="100000" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Roll" optional="true" field_type="unsigned short integer" field_units="radian">
                            <scale_range real_lower_limit="-3.14159265358979323846" real_upper_limit="3.14159265358979323846" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Pitch" optional="true" field_type="unsigned short integer" field_units="radian">
                            <scale_range real_lower_limit="-3.14159265358979323846" real_upper_limit="3.14159265358979323846" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Yaw" optional="true" field_type="unsigned short integer" field_units="radian">
                            <scale_range real_lower_limit="-3.14159265358979323846" real_upper_limit="3.14159265358979323846" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="WaypointTolerance" optional="true" field_type="unsigned short integer" field_units="meter">
                            <scale_range real_lower_limit="0" real_upper_limit="100" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="PathTolerance" optional="true" interpretation="A value of zero (0) is used for infinite tolerance" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="0" real_upper_limit="100000" integer_function="round"/>
                        </fixed_field>
                    </record>
                </body>
                <footer name="Footer"/>
            </message_def>
            <message_def name="SetLocalWaypointExt" message_id="04AD" is_command="true">
                <description xml:space="preserve">This message is used to set waypoint data based on the local coordinate system.  A local waypoint can have up to six fields to describe it completely.  The waypoint is defined in a local coordinate system using the X, Y, and (optionally) Z fields.  The desired orientation of the platform at the waypoint is defined using the roll, pitch, and yaw fields. The remaining fields provide the desired waypoint and path tolerances. Only fields 1-3 (presence vector, X, and Y) are required for each waypoint.  The presence vector is used to specify if the remaining fields, i.e., roll, pitch, and yaw, are used to further describe each waypoint and the desired orientation at that point and whether tolerances are provided.  It uses a variable field allowing platforms to select various methods for specifying altitude or depth. Note that in some applications, particularly air and undersea, position may be a mix of local coordinates for XY position and absolute coordinates for Z/altitude/depth.  This only applies if the Z axis for the vehicle coordinate frame is aligned with a vertical axis, e.g. a vector orthogonal to the ground plane.  In all other cases, implementations must use Zlocal reporting only. For example, a UUV launched from a USV may need to navigate using local X/Y coordinates based on its launch point (using dead reckoning from its IMU) but rely on direct readings that do not suffer from drift for its Depth and/or Altitude ASF. Note:  Path Tolerances may be specified with a lower limit of zero (an unachievable tolerance), which implies a precise point. The reader is cautioned against specifiying a tolerance so small as to exceed the vehicle's cababilities.</description>
                <header name="AppHeader">
                    <record name="HeaderRec" optional="false">
                        <fixed_field name="MessageID" optional="false" interpretation="A two byte field to hold the message ID of a message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </header>
                <body name="Body">
                    <record name="LocalWaypointExtRec" optional="false">
                        <presence_vector field_type_unsigned="unsigned byte"/>
                        <fixed_field name="X" optional="false" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="-20000000" real_upper_limit="20000000" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Y" optional="false" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="-20000000" real_upper_limit="20000000" integer_function="round"/>
                        </fixed_field>
                        <variable_field name="ZPosition" optional="true">
                            <type_and_units_field>
                                <type_and_units_enum name="AltitudeAGL" index="0" field_type="unsigned integer" field_units="meter">
                                    <scale_range real_lower_limit="-50000" real_upper_limit="50000" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="AltitudeMSL" index="1" field_type="unsigned integer" field_units="meter">
                                    <scale_range real_lower_limit="-50000" real_upper_limit="50000" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="AltitudeASF" index="2" field_type="unsigned integer" field_units="meter">
                                    <scale_range real_lower_limit="-50000" real_upper_limit="50000" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="Depth" index="3" field_type="unsigned integer" field_units="meter">
                                    <scale_range real_lower_limit="-50000" real_upper_limit="50000" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="ZLocal" index="4" field_type="unsigned integer" field_units="meter">
                                    <scale_range real_lower_limit="-50000" real_upper_limit="50000" integer_function="round"/>
                                </type_and_units_enum>
                            </type_and_units_field>
                        </variable_field>
                        <fixed_field name="Roll" optional="true" field_type="unsigned short integer" field_units="radian">
                            <scale_range real_lower_limit="-3.14159265358979323846" real_upper_limit="3.14159265358979323846" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Pitch" optional="true" field_type="unsigned short integer" field_units="radian">
                            <scale_range real_lower_limit="-3.14159265358979323846" real_upper_limit="3.14159265358979323846" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Heading" optional="true" field_type="unsigned short integer" field_units="radian">
                            <scale_range real_lower_limit="-3.14159265358979323846" real_upper_limit="3.14159265358979323846" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="WaypointTolerance" optional="true" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="0" real_upper_limit="10000" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="PathTolerance" optional="true" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="0" real_upper_limit="100000" integer_function="round"/>
                        </fixed_field>
                    </record>
                </body>
                <footer name="Footer"/>
            </message_def>
            <message_def name="QueryTravelSpeed" message_id="240A" is_command="false" deprecated="true">
                <description xml:space="preserve">This message shall cause the receiving component to reply to the requestor with a ID 440Ah: ReportTravelSpeed message.</description>
                <header name="AppHeader">
                    <record name="HeaderRec" optional="false">
                        <fixed_field name="MessageID" optional="false" interpretation="A two byte field to hold the message ID of a message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </header>
                <body name="Body"/>
                <footer name="Footer"/>
            </message_def>
            <message_def name="QueryTravelSpeedExt" message_id="24AA" is_command="false">
                <description xml:space="preserve">This message shall cause the receiving component to reply to the requestor with a ID 44AAh: ReportTravelSpeedExt  message.</description>
                <header name="AppHeader">
                    <record name="HeaderRec" optional="false">
                        <fixed_field name="MessageID" optional="false" interpretation="A two byte field to hold the message ID of a message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </header>
                <body name="Body"/>
                <footer name="Footer"/>
            </message_def>
            <message_def name="QueryLocalWaypoint" message_id="240D" is_command="false" deprecated="true">
                <description xml:space="preserve">This message shall cause the receiving component to reply to the requestor with a ID 440Dh: ReportLocalWaypoint (Deprecated) message.  A logical AND shall be performed on the requested presence vector and that representing the available fields from the responder.  The resulting message shall contain the fields indicated by the result of this logical AND operation.</description>
                <header name="AppHeader">
                    <record name="HeaderRec" optional="false">
                        <fixed_field name="MessageID" optional="false" interpretation="A two byte field to hold the message ID of a message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </header>
                <body name="Body">
                    <record name="QueryLocalWaypointRec" optional="false">
                        <fixed_field name="PresenceVector" optional="false" interpretation="See Report Local Waypoint Message" field_type="unsigned byte" field_units="one"/>
                    </record>
                </body>
                <footer name="Footer"/>
            </message_def>
            <message_def name="QueryLocalWaypointExt" message_id="24AD" is_command="false">
                <description xml:space="preserve">This message shall cause the receiving component to reply to the requestor with a ID 44ADh: ReportLocalWaypointExt message.  A logical AND shall be performed on the requested presence vector and that representing the available fields from the responder. The resulting message shall contain the fields indicated by the result of this logical AND operation.</description>
                <header name="AppHeader">
                    <record name="HeaderRec" optional="false">
                        <fixed_field name="MessageID" optional="false" interpretation="A two byte field to hold the message ID of a message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </header>
                <body name="Body">
                    <record name="QueryLocalWaypointExtRec" optional="false">
                        <fixed_field name="PresenceVector" optional="false" interpretation="See Report Local Waypoint Ext Message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </body>
                <footer name="Footer"/>
            </message_def>
        </input_set>
        <output_set>
            <message_def name="ReportTravelSpeed" message_id="440A" is_command="false" deprecated="true">
                <description xml:space="preserve">This message is used to provide the receiver the current value of the commanded travel speed. The message data of this message is identical to ID 040A h: SetTravelSpeed (Deprecated).</description>
                <header name="AppHeader">
                    <record name="HeaderRec" optional="false">
                        <fixed_field name="MessageID" optional="false" interpretation="A two byte field to hold the message ID of a message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </header>
                <body name="Body">
                    <record name="TravelSpeedRec" optional="false">
                        <fixed_field name="Speed" optional="false" field_type="unsigned short integer" field_units="meter per second">
                            <scale_range real_lower_limit="0" real_upper_limit="327.67" integer_function="round"/>
                        </fixed_field>
                    </record>
                </body>
                <footer name="Footer"/>
            </message_def>
            <message_def name="ReportTravelSpeedExt" message_id="44AA" is_command="false">
                <description xml:space="preserve">This message is used to provide the receiver the current value of the commanded travel speed. The message data of this message is identical to ID 04AA h: SetTravelSpeedExt.</description>
                <header name="AppHeader">
                    <record name="HeaderRec" optional="false">
                        <fixed_field name="MessageID" optional="false" interpretation="A two byte field to hold the message ID of a message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </header>
                <body name="Body">
                    <record name="TravelSpeedExtRec" optional="false">
                        <variable_field name="Speed" optional="false">
                            <type_and_units_field>
                                <type_and_units_enum name="SpeedOverGround" index="0" field_type="unsigned short integer" field_units="meter per second">
                                    <scale_range real_lower_limit="-327.68" real_upper_limit="327.67" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="SpeedRelativeToMedium" index="1" field_type="unsigned short integer" field_units="meter per second">
                                    <scale_range real_lower_limit="-327.68" real_upper_limit="327.67" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="RotationsPerMinute" index="2" field_type="unsigned short integer" field_units="rotations per minute">
                                    <scale_range real_lower_limit="-1000" real_upper_limit="1000" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="IndicatedSpeed" index="3" field_type="unsigned short integer" field_units="meter per second">
                                    <scale_range real_lower_limit="-327.68" real_upper_limit="327.67" integer_function="round"/>
                                </type_and_units_enum>
                            </type_and_units_field>
                        </variable_field>
                    </record>
                </body>
                <footer name="Footer"/>
            </message_def>
            <message_def name="ReportLocalWaypoint" message_id="440D" is_command="false" deprecated="true">
                <description xml:space="preserve">This message is used to provide the receiver the values of the commanded waypoint fields as specified by the data in ID 040Dh: SetLocalWaypoint (Deprecated).</description>
                <header name="AppHeader">
                    <record name="HeaderRec" optional="false">
                        <fixed_field name="MessageID" optional="false" interpretation="A two byte field to hold the message ID of a message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </header>
                <body name="Body">
                    <record name="LocalWaypointRec" optional="false">
                        <presence_vector field_type_unsigned="unsigned byte"/>
                        <fixed_field name="X" optional="false" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="-100000" real_upper_limit="100000" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Y" optional="false" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="-100000" real_upper_limit="100000" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Z" optional="true" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="-100000" real_upper_limit="100000" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Roll" optional="true" field_type="unsigned short integer" field_units="radian">
                            <scale_range real_lower_limit="-3.14159265358979323846" real_upper_limit="3.14159265358979323846" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Pitch" optional="true" field_type="unsigned short integer" field_units="radian">
                            <scale_range real_lower_limit="-3.14159265358979323846" real_upper_limit="3.14159265358979323846" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Yaw" optional="true" field_type="unsigned short integer" field_units="radian">
                            <scale_range real_lower_limit="-3.14159265358979323846" real_upper_limit="3.14159265358979323846" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="WaypointTolerance" optional="true" field_type="unsigned short integer" field_units="meter">
                            <scale_range real_lower_limit="0" real_upper_limit="100" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="PathTolerance" optional="true" interpretation="A value of zero (0) is used for infinite tolerance" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="0" real_upper_limit="100000" integer_function="round"/>
                        </fixed_field>
                    </record>
                </body>
                <footer name="Footer"/>
            </message_def>
            <message_def name="ReportLocalWaypointExt" message_id="44AD" is_command="false">
                <description xml:space="preserve">This message is used to provide the receiver the values of the commanded waypoint fields as specified by the data in ID 04ADh: SetLocalWaypointExt.</description>
                <header name="AppHeader">
                    <record name="HeaderRec" optional="false">
                        <fixed_field name="MessageID" optional="false" interpretation="A two byte field to hold the message ID of a message" field_type="unsigned short integer" field_units="one"/>
                    </record>
                </header>
                <body name="Body">
                    <record name="LocalWaypointExtRec" optional="false">
                        <presence_vector field_type_unsigned="unsigned byte"/>
                        <fixed_field name="X" optional="false" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="-20000000" real_upper_limit="20000000" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Y" optional="false" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="-20000000" real_upper_limit="20000000" integer_function="round"/>
                        </fixed_field>
                        <variable_field name="ZPosition" optional="true">
                            <type_and_units_field>
                                <type_and_units_enum name="AltitudeAGL" index="0" field_type="unsigned integer" field_units="meter">
                                    <scale_range real_lower_limit="-50000" real_upper_limit="50000" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="AltitudeMSL" index="1" field_type="unsigned integer" field_units="meter">
                                    <scale_range real_lower_limit="-50000" real_upper_limit="50000" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="AltitudeASF" index="2" field_type="unsigned integer" field_units="meter">
                                    <scale_range real_lower_limit="-50000" real_upper_limit="50000" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="Depth" index="3" field_type="unsigned integer" field_units="meter">
                                    <scale_range real_lower_limit="-50000" real_upper_limit="50000" integer_function="round"/>
                                </type_and_units_enum>
                                <type_and_units_enum name="ZLocal" index="4" field_type="unsigned integer" field_units="meter">
                                    <scale_range real_lower_limit="-50000" real_upper_limit="50000" integer_function="round"/>
                                </type_and_units_enum>
                            </type_and_units_field>
                        </variable_field>
                        <fixed_field name="Roll" optional="true" field_type="unsigned short integer" field_units="radian">
                            <scale_range real_lower_limit="-3.14159265358979323846" real_upper_limit="3.14159265358979323846" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Pitch" optional="true" field_type="unsigned short integer" field_units="radian">
                            <scale_range real_lower_limit="-3.14159265358979323846" real_upper_limit="3.14159265358979323846" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="Heading" optional="true" field_type="unsigned short integer" field_units="radian">
                            <scale_range real_lower_limit="-3.14159265358979323846" real_upper_limit="3.14159265358979323846" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="WaypointTolerance" optional="true" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="0" real_upper_limit="10000" integer_function="round"/>
                        </fixed_field>
                        <fixed_field name="PathTolerance" optional="true" field_type="unsigned integer" field_units="meter">
                            <scale_range real_lower_limit="0" real_upper_limit="100000" integer_function="round"/>
                        </fixed_field>
                    </record>
                </body>
                <footer name="Footer"/>
            </message_def>
        </output_set>
    </message_set>
    <internal_events_set/>
    <protocol_behavior>
        <start state_machine_name="management.accessControl.events.transport.ReceiveFSM" state_name="Receiving.Ready.NotControlled"/>
        <start state_machine_name="management.accessControl.events.transport.SendFSM" state_name="Sending"/>
        <state_machine name="management.accessControl.events.transport.ReceiveFSM">
            <state name="Receiving" initial_state="Ready">
                <state name="Ready" initial_state="NotControlled">
                    <state name="NotControlled" initial_state="Available">
                        <state name="Available" initial_state="Standby">
                            <state name="Standby"/>
                        </state>
                        <state name="NotAvailable" initial_state="Init">
                            <state name="Init"/>
                            <state name="Failure"/>
                            <state name="Shutdown"/>
                            <state name="Emergency"/>
                        </state>
                        <default_state>
                            <transition name="management.accessControl.events.transport.Receive">
                                <parameter type="QueryTravelSpeed" value="msg" interpretation="enveloped query travel                     speed message"/>
                                <parameter type="Receive.Body.ReceiveRec" value="transportData" interpretation="transport data"/>
                                <internal/>
                                <action name="management.accessControl.events.transport.Send" interpretation="Send a Report                     Travel Speed message">
                                    <argument value=" 'ReportTravelSpeed' "/>
                                    <argument value="transportData"/>
                                </action>
                            </transition>
                            <transition name="management.accessControl.events.transport.Receive">
                                <parameter type="QueryTravelSpeedExt" value="msg" interpretation="enveloped query travel                     speed ext message"/>
                                <parameter type="Receive.Body.ReceiveRec" value="transportData" interpretation="transport data"/>
                                <internal/>
                                <action name="management.accessControl.events.transport.Send" interpretation="Send a Report                     Travel Speed Ext message">
                                    <argument value=" 'ReportTravelSpeedExt' "/>
                                    <argument value="transportData"/>
                                </action>
                            </transition>
                            <transition name="management.accessControl.events.transport.Receive">
                                <parameter type="QueryLocalWaypoint" value="msg" interpretation="enveloped query local                     waypoint message"/>
                                <parameter type="Receive.Body.ReceiveRec" value="transportData" interpretation="transport data"/>
                                <guard condition="waypointExists( msg )" interpretation="True if a valid waypoint has been received."/>
                                <internal/>
                                <action name="management.accessControl.events.transport.Send" interpretation="Send a Report                     Local Waypoint message">
                                    <argument value=" 'ReportLocalWaypoint' "/>
                                    <argument value="transportData"/>
                                </action>
                            </transition>
                            <transition name="management.accessControl.events.transport.Receive">
                                <parameter type="QueryLocalWaypointExt" value="msg" interpretation="enveloped query local                     waypoint ext message"/>
                                <parameter type="Receive.Body.ReceiveRec" value="transportData" interpretation="transport data"/>
                                <guard condition="waypointExists( msg )" interpretation="True if a valid waypoint has been received."/>
                                <internal/>
                                <action name="management.accessControl.events.transport.Send" interpretation="Send a Report                     Local Waypoint Ext message">
                                    <argument value=" 'ReportLocalWaypointExt' "/>
                                    <argument value="transportData"/>
                                </action>
                            </transition>
                        </default_state>
                    </state>
                    <state name="Controlled" initial_state="Available">
                        <state name="Available" initial_state="Standby">
                            <state name="Standby"/>
                            <state name="Ready">
                                <exit>
                                    <action name="resetTravelSpeed" interpretation="Safe motion of the platform, as described in Section 3.5"/>
                                </exit>
                                <transition name="management.accessControl.events.transport.Receive">
                                    <parameter type="SetTravelSpeed" value="msg" interpretation="enveloped set travel                     speed message"/>
                                    <parameter type="Receive.Body.ReceiveRec" value="transportData" interpretation="transport data"/>
                                    <guard condition="isControllingClient( transportData ) &amp;&amp; waypointExists( msg )" interpretation="True if the message that triggered the transition is received from the                      client that is in control of this service AND a valid waypoint has been received."/>
                                    <internal/>
                                    <action name="setTravelSpeed" interpretation="Set the travel speed for the platform."/>
                                </transition>
                                <transition name="management.accessControl.events.transport.Receive">
                                    <parameter type="SetTravelSpeedExt" value="msg" interpretation="enveloped set travel                     speed ext message"/>
                                    <parameter type="Receive.Body.ReceiveRec" value="transportData" interpretation="transport data"/>
                                    <guard condition="isControllingClient( transportData ) &amp;&amp; waypointExists( msg )" interpretation="True if the message that triggered the transition is received from the                      client that is in control of this service AND a valid waypoint has been received."/>
                                    <internal/>
                                    <action name="setTravelSpeedExt" interpretation="Set the travel speed for the platform."/>
                                </transition>
                            </state>
                        </state>
                        <state name="NotAvailable" initial_state="Emergency">
                            <state name="Emergency"/>
                        </state>
                        <default_state>
                            <transition name="management.accessControl.events.transport.Receive">
                                <parameter type="SetLocalWaypoint" value="msg" interpretation="enveloped set local                   waypoint message"/>
                                <parameter type="Receive.Body.ReceiveRec" value="transportData" interpretation="transport data"/>
                                <guard condition="isControllingClient( transportData )" interpretation="True if the message that triggered the                    transition is received from the client that is in control of this service."/>
                                <internal/>
                                <action name="setWaypoint" interpretation="Set the target destination of the platform."/>
                            </transition>
                            <transition name="management.accessControl.events.transport.Receive">
                                <parameter type="SetLocalWaypointExt" value="msg" interpretation="enveloped set local                   waypoint message"/>
                                <parameter type="Receive.Body.ReceiveRec" value="transportData" interpretation="transport data"/>
                                <guard condition="isControllingClient( transportData )" interpretation="True if the message that triggered the                    transition is received from the client that is in control of this service."/>
                                <internal/>
                                <action name="setWaypointExt" interpretation="Set the target destination of the platform."/>
                            </transition>
                            <transition name="management.accessControl.events.transport.Receive">
                                <parameter type="QueryTravelSpeed" value="msg" interpretation="enveloped query travel                   speed message"/>
                                <parameter type="Receive.Body.ReceiveRec" value="transportData" interpretation="transport data"/>
                                <internal/>
                                <action name="management.accessControl.events.transport.Send" interpretation="Send a Report                   Travel Speed message">
                                    <argument value=" 'ReportTravelSpeed' "/>
                                    <argument value="transportData"/>
                                </action>
                            </transition>
                            <transition name="management.accessControl.events.transport.Receive">
                                <parameter type="QueryTravelSpeedExt" value="msg" interpretation="enveloped query travel                   speed ext message"/>
                                <parameter type="Receive.Body.ReceiveRec" value="transportData" interpretation="transport data"/>
                                <internal/>
                                <action name="management.accessControl.events.transport.Send" interpretation="Send a Report                   Travel Speed Ext message">
                                    <argument value=" 'ReportTravelSpeedExt' "/>
                                    <argument value="transportData"/>
                                </action>
                            </transition>
                            <transition name="management.accessControl.events.transport.Receive">
                                <parameter type="QueryLocalWaypoint" value="msg" interpretation="enveloped query local                   waypoint message"/>
                                <parameter type="Receive.Body.ReceiveRec" value="transportData" interpretation="transport data"/>
                                <guard condition="waypointExists( msg )" interpretation="True if a valid waypoint has been received."/>
                                <internal/>
                                <action name="management.accessControl.events.transport.Send" interpretation="Send a Report                   Local Waypoint message">
                                    <argument value=" 'ReportLocalWaypoint' "/>
                                    <argument value="transportData"/>
                                </action>
                            </transition>
                            <transition name="management.accessControl.events.transport.Receive">
                                <parameter type="QueryLocalWaypointExt" value="msg" interpretation="enveloped query local                   waypoint ext message"/>
                                <parameter type="Receive.Body.ReceiveRec" value="transportData" interpretation="transport data"/>
                                <guard condition="waypointExists( msg )" interpretation="True if a valid waypoint has been received."/>
                                <internal/>
                                <action name="management.accessControl.events.transport.Send" interpretation="Send a Report                   Local Waypoint Ext message">
                                    <argument value=" 'ReportLocalWaypointExt' "/>
                                    <argument value="transportData"/>
                                </action>
                            </transition>
                        </default_state>
                    </state>
                    <default_state/>
                </state>
            </state>
        </state_machine>
        <state_machine name="management.accessControl.events.transport.SendFSM">
            <state name="Sending"/>
        </state_machine>
    </protocol_behavior>
</service_def>
